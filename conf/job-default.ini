[DEFAULT]
template        = @job-default.tpl
scriptencoding  = utf-8
;R package that contains Tasks and Drivers definitions
package         = tasks
;R Requested number of nodes
nnodes          = 1
;R Requested number of tasks per node
ntasks          = 1
;R Requested number of threads per task
openmp          = 1
;R Vortex scripts base directory
rootapp         = $home/vortex
;R The default cutoff
cutoff          = production
;R Unlike in real life, we do not want a refill...
refill          = False
mtool_path      =
mtool_dir       =
mtool_log       =
mtool_args      =
mtool_tpl       =
mtool_t_tpl     =
flow_tplsuffix  =
submitcmd       =
extrapythonpath =
loadedmods      = common,gco,olive,
                  common.tools.addons,
                  common.util.usepygram,
                  previmar,
                  previmar.tools.addons
loadedaddons    = nwp,marine
defaultencoding = en_US.UTF-8
ldlibs          =

;R Usual options for a second generation Bullx supercomputer
[generic-bullx2-slurm]
python            = /opt/softs/python/2.7.5/bin/python
template    	  = @job-bullx2-tmpdir-default.tpl
partition         = normal64
refill_partition  = transfert
mem               = 62000
time              = 00:20:00
exclusive         = exclusive
submitcmd         = sbatch
mtool_path        = /home/mf/dp/marp/verolive/public/mtool/bin/mtool_filter.pl
mtool_dir         = --mtooldir=/scratch/mtool/{user:s}
mtool_log         = --logfile={appbase:s}/logs/{rundate:s}/{file:s}.{tstamp:s}
mtool_args        = --language=python --shell=python --cleanmode=olive
mtool_tpl         = @job-bullx2-mtool-default
mtool_t_tpl       = @job-bullx2-mtool-transfer

;R Usual settings for operations
[operations]
rootapp           = $pwd
rootdir           = None
alarm             = True
archive           = True
fullplay          = True
mail              = True
jeeves            = async
retry             = 0
runstep           = 1
partition         = oper
refill_partition  = ft-oper
phase             = True
hasmember         = False

;R Usual settings for research experiments
[research]
rootapp       = $home/vortex-scripts
jobassistant  = generic
extra_wrapper = %(submitcmd)s {injob:s}
suitebg       = oper

;R ecFlow
[ecflow]
template          = @job-default-ecflow.tpl
flow_tplsuffix    = -ecflow

;R Mtool additions
[mtool]
template      = %(mtool_tpl)s%(flow_tplsuffix)s.tpl
extra_wrapper = %(mtool_path)s %(mtool_dir)s %(mtool_log)s %(mtool_args)s {injob:s}

[mtoolsingle]
template      = %(mtool_t_tpl)s%(flow_tplsuffix)s.tpl
extra_wrapper = %(mtool_path)s %(mtool_dir)s %(mtool_log)s %(mtool_args)s {injob:s}

;R The default profile
[void]
task   = void


;R The operational suite profile
[oper:operations:generic-bullx2-slurm]
template  = @opjob-default.tpl
account   = mxpt

;R The operations test jobs profile
[test:operations:generic-bullx2-slurm]
template  = @opjob-test-default.tpl
account   = mxpt
mail      = False
phase     = False


;R The usual researcher profile on any generic machine

;R without ecFlow
[rd:research]

;R with ecFlow
[rd-ecf:research:ecflow]


;R The usual researcher profile on prolix with an automatic MTOOL launch

;R (do not use: please use MTOOL)
[rd-prolix:research:generic-bullx2-slurm]
target    = prolix

;R Prolix + 3 steps with MTOOL
[rd-prolix-mt:mtool:rd-prolix]

;R Prolix + 3 steps with MTOOL + ecFlow
[rd-prolix-mt-ecf:mtool:ecflow:rd-prolix]

;R Prolix + 1 step with MTOOL
[rd-prolix-mtransfer:mtoolsingle:rd-prolix]

;R Prolix + 1 step with MTOOL + ecFlow
[rd-prolix-mtransfer-ecf:mtoolsingle:ecflow:rd-prolix]


;R The usual researcher profile on beaufix with an automatic MTOOL launch

;R (do not use: please use MTOOL)
[rd-beaufix:research:generic-bullx2-slurm]
target    = beaufix

;R Beaufix + 3 steps with MTOOL
[rd-beaufix-mt:mtool:rd-beaufix]

;R Beaufix + 3 steps with MTOOL + ecFlow
[rd-beaufix-mt-ecf:mtool:ecflow:rd-beaufix]

;R Beaufix + 1 step with MTOOL
[rd-beaufix-mtransfer:mtoolsingle:rd-beaufix]

;R Beaufix + 1 step with MTOOL + ecFlow
[rd-beaufix-mtransfer-ecf:mtoolsingle:ecflow:rd-beaufix]
